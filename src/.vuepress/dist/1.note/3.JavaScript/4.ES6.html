<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>4.ES6 | Notes</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="ä¸æ–­å®Œå–„çš„å‰ç«¯çŸ¥è¯†ä½“ç³»">
    
    <link rel="preload" href="/assets/css/0.styles.5732f507.css" as="style"><link rel="preload" href="/assets/js/app.32698c1e.js" as="script"><link rel="preload" href="/assets/js/2.ddd86d71.js" as="script"><link rel="preload" href="/assets/js/25.05b0550d.js" as="script"><link rel="preload" href="/assets/js/3.c0b47333.js" as="script"><link rel="prefetch" href="/assets/js/10.1a74500b.js"><link rel="prefetch" href="/assets/js/100.14ae7efe.js"><link rel="prefetch" href="/assets/js/101.7b0f3b25.js"><link rel="prefetch" href="/assets/js/102.8dc2e7c9.js"><link rel="prefetch" href="/assets/js/103.94a0490b.js"><link rel="prefetch" href="/assets/js/104.aec645e0.js"><link rel="prefetch" href="/assets/js/105.4d299c97.js"><link rel="prefetch" href="/assets/js/106.66e1e7e5.js"><link rel="prefetch" href="/assets/js/107.9fbd0c6f.js"><link rel="prefetch" href="/assets/js/108.fa8fc4a8.js"><link rel="prefetch" href="/assets/js/109.dd0b5cc7.js"><link rel="prefetch" href="/assets/js/11.bd5491d6.js"><link rel="prefetch" href="/assets/js/12.5bed57eb.js"><link rel="prefetch" href="/assets/js/13.ccf43265.js"><link rel="prefetch" href="/assets/js/14.dd2be6dd.js"><link rel="prefetch" href="/assets/js/15.475c66a5.js"><link rel="prefetch" href="/assets/js/16.f934998d.js"><link rel="prefetch" href="/assets/js/17.2612f19e.js"><link rel="prefetch" href="/assets/js/18.e0f383b7.js"><link rel="prefetch" href="/assets/js/19.6112ec65.js"><link rel="prefetch" href="/assets/js/20.9f871bc8.js"><link rel="prefetch" href="/assets/js/21.ec032ead.js"><link rel="prefetch" href="/assets/js/22.76ffde0c.js"><link rel="prefetch" href="/assets/js/23.5f39a210.js"><link rel="prefetch" href="/assets/js/24.49a65580.js"><link rel="prefetch" href="/assets/js/26.c19cbab7.js"><link rel="prefetch" href="/assets/js/27.a3bfcb7a.js"><link rel="prefetch" href="/assets/js/28.4a9a58f2.js"><link rel="prefetch" href="/assets/js/29.1213920b.js"><link rel="prefetch" href="/assets/js/30.475d4560.js"><link rel="prefetch" href="/assets/js/31.a6afb4da.js"><link rel="prefetch" href="/assets/js/32.da7ec1ad.js"><link rel="prefetch" href="/assets/js/33.bf5af0ac.js"><link rel="prefetch" href="/assets/js/34.6decd0fd.js"><link rel="prefetch" href="/assets/js/35.30f9da62.js"><link rel="prefetch" href="/assets/js/36.e6460407.js"><link rel="prefetch" href="/assets/js/37.79979d8c.js"><link rel="prefetch" href="/assets/js/38.83f42877.js"><link rel="prefetch" href="/assets/js/39.a3277a6d.js"><link rel="prefetch" href="/assets/js/4.517f533e.js"><link rel="prefetch" href="/assets/js/40.abc81f54.js"><link rel="prefetch" href="/assets/js/41.cda86909.js"><link rel="prefetch" href="/assets/js/42.f1e58dc3.js"><link rel="prefetch" href="/assets/js/43.bfacd4c2.js"><link rel="prefetch" href="/assets/js/44.0b4b1bf3.js"><link rel="prefetch" href="/assets/js/45.bf36ab3e.js"><link rel="prefetch" href="/assets/js/46.49d224f7.js"><link rel="prefetch" href="/assets/js/47.796e08d6.js"><link rel="prefetch" href="/assets/js/48.4a591a64.js"><link rel="prefetch" href="/assets/js/49.1887312e.js"><link rel="prefetch" href="/assets/js/5.535a10e5.js"><link rel="prefetch" href="/assets/js/50.ec5eb73d.js"><link rel="prefetch" href="/assets/js/51.74da0c18.js"><link rel="prefetch" href="/assets/js/52.ef4c72cf.js"><link rel="prefetch" href="/assets/js/53.65653b41.js"><link rel="prefetch" href="/assets/js/54.592dbe84.js"><link rel="prefetch" href="/assets/js/55.437bd85c.js"><link rel="prefetch" href="/assets/js/56.f052d788.js"><link rel="prefetch" href="/assets/js/57.bc4b9551.js"><link rel="prefetch" href="/assets/js/58.2ab5461f.js"><link rel="prefetch" href="/assets/js/59.86d4d0b8.js"><link rel="prefetch" href="/assets/js/6.8360b40f.js"><link rel="prefetch" href="/assets/js/60.abfcb48c.js"><link rel="prefetch" href="/assets/js/61.e9eff7c8.js"><link rel="prefetch" href="/assets/js/62.947f7b1e.js"><link rel="prefetch" href="/assets/js/63.c0bd1910.js"><link rel="prefetch" href="/assets/js/64.77fbfc2f.js"><link rel="prefetch" href="/assets/js/65.829d6508.js"><link rel="prefetch" href="/assets/js/66.d94e49a8.js"><link rel="prefetch" href="/assets/js/67.eac07729.js"><link rel="prefetch" href="/assets/js/68.e7347934.js"><link rel="prefetch" href="/assets/js/69.82915924.js"><link rel="prefetch" href="/assets/js/7.92b2eb95.js"><link rel="prefetch" href="/assets/js/70.73c5a60c.js"><link rel="prefetch" href="/assets/js/71.ccf317a6.js"><link rel="prefetch" href="/assets/js/72.7c7a4b80.js"><link rel="prefetch" href="/assets/js/73.eb15dc47.js"><link rel="prefetch" href="/assets/js/74.aea9c8d3.js"><link rel="prefetch" href="/assets/js/75.84e4786d.js"><link rel="prefetch" href="/assets/js/76.3ddddb66.js"><link rel="prefetch" href="/assets/js/77.ed7bfa65.js"><link rel="prefetch" href="/assets/js/78.f798384a.js"><link rel="prefetch" href="/assets/js/79.9760078f.js"><link rel="prefetch" href="/assets/js/8.24c08b75.js"><link rel="prefetch" href="/assets/js/80.76b3c858.js"><link rel="prefetch" href="/assets/js/81.eb6d20fe.js"><link rel="prefetch" href="/assets/js/82.e5afcaa0.js"><link rel="prefetch" href="/assets/js/83.a96f66dd.js"><link rel="prefetch" href="/assets/js/84.61115498.js"><link rel="prefetch" href="/assets/js/85.360d6618.js"><link rel="prefetch" href="/assets/js/86.bf41d60e.js"><link rel="prefetch" href="/assets/js/87.369698d1.js"><link rel="prefetch" href="/assets/js/88.53a71a68.js"><link rel="prefetch" href="/assets/js/89.672fccc3.js"><link rel="prefetch" href="/assets/js/9.08f8c6e9.js"><link rel="prefetch" href="/assets/js/90.2e176512.js"><link rel="prefetch" href="/assets/js/91.2f3b0181.js"><link rel="prefetch" href="/assets/js/92.d7539948.js"><link rel="prefetch" href="/assets/js/93.d4545fd7.js"><link rel="prefetch" href="/assets/js/94.1df204e6.js"><link rel="prefetch" href="/assets/js/95.6f692f71.js"><link rel="prefetch" href="/assets/js/96.1dc295cf.js"><link rel="prefetch" href="/assets/js/97.81a58af9.js"><link rel="prefetch" href="/assets/js/98.4feb88d5.js"><link rel="prefetch" href="/assets/js/99.03f2a4a9.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5732f507.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/1.note/" class="nav-link router-link-active">
  å‰ç«¯ä½“ç³»
</a></div><div class="nav-item"><a href="/2.quickcheck/" class="nav-link">
  é€ŸæŸ¥
</a></div><div class="nav-item"><a href="/3.other/" class="nav-link">
  å…¶ä»–
</a></div> <a href="https://github.com/zhukunpenglinyutong/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/1.note/" class="nav-link router-link-active">
  å‰ç«¯ä½“ç³»
</a></div><div class="nav-item"><a href="/2.quickcheck/" class="nav-link">
  é€ŸæŸ¥
</a></div><div class="nav-item"><a href="/3.other/" class="nav-link">
  å…¶ä»–
</a></div> <a href="https://github.com/zhukunpenglinyutong/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>0.è®¡ç®—æœºåŸºç¡€</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1.HTML</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>2.CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>3.JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/1.note/3.JavaScript/1.JavaScriptæ ¹åŸº.html" class="sidebar-link">1.JavaScriptæ ¹åŸº</a></li><li><a href="/1.note/3.JavaScript/2.JavaScriptæ·±å…¥.html" class="sidebar-link">2.JavaScriptæ·±å…¥</a></li><li><a href="/1.note/3.JavaScript/3.JavaScriptåº”ç”¨.html" class="sidebar-link">3.JavaScriptåº”ç”¨</a></li><li><a href="/1.note/3.JavaScript/4.ES6.html" aria-current="page" class="active sidebar-link">4.ES6</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/1.note/3.JavaScript/4.ES6.html#es6" class="sidebar-link">ES6</a></li><li class="sidebar-sub-header"><a href="/1.note/3.JavaScript/4.ES6.html#js-å„ä¸ªå†…ç½®apiåŠŸèƒ½å®ç°" class="sidebar-link">JS å„ä¸ªå†…ç½®APIåŠŸèƒ½å®ç°</a></li><li class="sidebar-sub-header"><a href="/1.note/3.JavaScript/4.ES6.html#promise" class="sidebar-link">Promise+</a></li></ul></li><li><a href="/1.note/3.JavaScript/5.Underscoreåº“æºç åˆ†æ.html" class="sidebar-link">5.Underscoreåº“æºç åˆ†æ</a></li><li><a href="/1.note/3.JavaScript/6.Lodashjsåº“æºç åˆ†æ.html" class="sidebar-link">6.Lodashjsåº“æºç åˆ†æ</a></li><li><a href="/1.note/3.JavaScript/7.å‡½æ•°å¼ç¼–ç¨‹.html" class="sidebar-link">7.å‡½æ•°å¼ç¼–ç¨‹</a></li><li><a href="/1.note/3.JavaScript/8.TypeScript.html" class="sidebar-link">8.TypeScript</a></li><li><a href="/1.note/3.JavaScript/Cocos2d.html" class="sidebar-link">Cocos2d</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>4.jQueryåŠå…¶å‘¨è¾¹åº“</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>5.1MVVMæ¡†æ¶ï¼ˆVueï¼‰</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>5.2MVVMæ¡†æ¶ï¼ˆReactï¼‰</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>6.ç§»åŠ¨ç«¯</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>7.Node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.0ç½‘ç»œ</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.1å‰ç«¯å·¥ç¨‹åŒ–</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.2 å‰ç«¯å®‰å…¨</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.3å‰ç«¯æ€§èƒ½ä¼˜åŒ–</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.4å‰ç«¯ä»£ç è´¨é‡</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.5è¿ç»´</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8.6å‰ç«¯æ¶æ„</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>9.é¡¹ç›®</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_4-es6"><a href="#_4-es6" class="header-anchor">#</a> 4.ES6</h1> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>æ³¨æ„æ­¤å¤„ï¼šå†…å®¹ä¸å…¨ï¼Œç»“æ„æ··ä¹±ï¼Œç­‰å¾…é‡æ„...</p></div> <hr> <h2 id="es6"><a href="#es6" class="header-anchor">#</a> ES6</h2> <h3 id="_0-es6æ¨¡å—åŒ–"><a href="#_0-es6æ¨¡å—åŒ–" class="header-anchor">#</a> 0.ES6æ¨¡å—åŒ–</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ES6æ¨¡å—ï¼šæ¨¡å—ä½œç”¨åŸŸï¼Œè‡ªåŠ¨ä¸¥æ ¼æ¨¡å¼ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>æ¨¡å—çš„å¯¼å…¥å’Œå¯¼å‡º</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å¯¼å‡º a.js</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token comment">// export c = 30; å®šä¹‰æ—¶å¯¼å‡º</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  a<span class="token punctuation">,</span>
  b
<span class="token punctuation">}</span>


<span class="token comment">// å¯¼å…¥ a.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> a<span class="token punctuation">,</span> b <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./a.js'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// 10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">// 20</span>

<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> m <span class="token keyword">from</span> <span class="token string">'./a.js'</span> <span class="token comment">// å…¨éƒ¨å¼•å…¥</span>
<span class="token comment">// Module {</span>
<span class="token comment">//   default: Object,</span>
<span class="token comment">//   Symbol(Symbol.toStringTag): &quot;Module&quot;</span>
<span class="token comment">// }</span>

<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./a.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token parameter">m</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'m'</span><span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// å¼‚æ­¥å¼•å…¥</span>
<span class="token comment">// Module {</span>
<span class="token comment">//   default: Object,</span>
<span class="token comment">//   Symbol(Symbol.toStringTag): &quot;Module&quot;</span>
<span class="token comment">// }</span>

</code></pre></div><hr> <h3 id="_1-åŸºç¡€-å®šä¹‰å˜é‡-æ¨¡æ¿å­—ç¬¦ä¸²"><a href="#_1-åŸºç¡€-å®šä¹‰å˜é‡-æ¨¡æ¿å­—ç¬¦ä¸²" class="header-anchor">#</a> 1.åŸºç¡€ï¼ˆå®šä¹‰å˜é‡ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²ï¼‰</h3> <p><strong>å®šä¹‰å˜é‡çš„æ–°æ–¹å¼</strong></p> <ul><li>letå…³é”®å­—
<ul><li>å—çº§ä½œç”¨åŸŸ</li> <li>å˜é‡æå‡ï¼Œæš‚æ—¶æ€§æ­»åŒº</li> <li>ä¸å…è®¸é‡å¤å£°æ˜</li></ul></li> <li>constå…³é”®å­—ï¼ˆå®šä¹‰å¸¸é‡ï¼‰
<ul><li>ç±»ä¼¼äºlet</li> <li>ä¸å…è®¸é‡å¤èµ‹å€¼</li></ul></li></ul> <hr> <p><strong>let å’Œ const åˆ°åº•æœ‰æ²¡æœ‰å˜é‡æå‡ï¼Ÿæœ‰çš„è¯ï¼Œä¸ºä»€ä¹ˆä¸èƒ½åœ¨å®šä¹‰å‰ä½¿ç”¨ï¼Ÿ</strong></p> <ul><li>var çš„ã€Œåˆ›å»ºã€å’Œã€Œåˆå§‹åŒ–ã€éƒ½è¢«æå‡äº†</li> <li>function çš„ã€Œåˆ›å»ºã€ã€Œåˆå§‹åŒ–ã€å’Œã€Œèµ‹å€¼ã€éƒ½è¢«æå‡äº†</li> <li>let çš„ã€Œåˆ›å»ºã€è¿‡ç¨‹è¢«æå‡äº†ï¼Œä½†æ˜¯åˆå§‹åŒ–æ²¡æœ‰æå‡</li> <li>const åªæœ‰ã€Œåˆ›å»ºã€å’Œã€Œåˆå§‹åŒ–ã€ï¼Œæ²¡æœ‰ã€Œèµ‹å€¼ã€è¿‡ç¨‹</li></ul> <img src="https://pic1.zhimg.com/80/v2-9c8c4a0a3ce5402b1a74f488d79c74d0_hd.jpg"> <p><a href="https://zhuanlan.zhihu.com/p/28140450" target="_blank" rel="noopener noreferrer">åŸæ–‡é“¾æ¥<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <hr> <p><strong>æ¨¡æ¿å­—ç¬¦ä¸²</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">// å®ç°è¿™ä¸ªæ•ˆæœ</span>
<span class="token comment">// ä½ å¥½ä¸–ç•Œ!</span>
<span class="token comment">// æ—©ä¸Šå¥½</span>

<span class="token comment">// ES5</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">'ä¸–ç•Œ'</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">'ä½ å¥½'</span> <span class="token operator">+</span> str <span class="token operator">+</span> <span class="token string">'!\n'</span> <span class="token operator">+</span> <span class="token string">'æ—©ä¸Šå¥½'</span>

<span class="token comment">// ES6</span>
<span class="token keyword">let</span> strEs6 <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
ä½ å¥½</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>str<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!
æ—©ä¸Šå¥½
</span><span class="token template-punctuation string">`</span></span>

</code></pre></div><hr> <h3 id="_2-æ•°ç»„æ‹“å±•"><a href="#_2-æ•°ç»„æ‹“å±•" class="header-anchor">#</a> 2.æ•°ç»„æ‹“å±•</h3> <p><strong>æ‹“å±•è¿ç®—ç¬¦</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// æ±‚æ•°ç»„è¿™é‡Œé¢æœ€å¤§çš„å€¼</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">34</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span>

<span class="token comment">// åŸç”ŸAPI Math.max(1,2,34,5,6,9) æ¥æ”¶çš„æ˜¯ä¸€ç»„æ•°ï¼Œæ‰€ä»¥è¿˜éœ€è¦è½¬ä¸€ä¸‹</span>
Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> arr<span class="token punctuation">)</span> <span class="token comment">//ES5 34</span>
Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">)</span> <span class="token comment">// ES6 34</span>

</code></pre></div><p><strong>â£ï¸æ³¨æ„ï¼šæ•°ç»„çš„æ‹“å±•è¿ç®—ç¬¦æ˜¯æµ…æ‹·è´</strong></p> <hr> <p><strong>è§£æ„èµ‹å€¼ï¼šæœ¬è´¨æ˜¯æ¨¡å¼åŒ¹é…</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z <span class="token punctuation">}</span> <span class="token operator">=</span> arr
x <span class="token comment">// 1</span>
y <span class="token comment">// 2</span>
z <span class="token comment">// 3</span>

</code></pre></div><hr> <p><strong>ES6æ–°å¢çš„é™æ€æ–¹æ³•ï¼šArray.from() &amp;&amp; Array.of()</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Array.from() å°†ç±»æ•°ç»„æˆ–è€…å…·æœ‰è¿­ä»£å™¨æ¥å£çš„ è½¬ä¸º çœŸæ­£æ•°ç»„</span>
Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span>

<span class="token comment">// Array.of() ä¼ å…¥å‚æ•°ï¼Œåˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼ˆå¯¹æ ‡ new Array() åˆ›å»ºä¸€ä¸ªæ—¶å€™æœ‰é—®é¢˜çš„ï¼Œç”¨ofæ›´è§„èŒƒï¼‰</span>
Array<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span> <span class="token comment">// [13]</span>
Array<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">)</span> <span class="token comment">// [13, 14]</span>

<span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span> <span class="token comment">// ä¼šåˆ›å»ºä¸€ä¸ªé•¿åº¦ 13çš„æ•°ç»„</span>
<span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">)</span> <span class="token comment">// [13, 14]</span>
</code></pre></div><hr> <p><strong>ES6æ–°å¢åŸå‹ä¸Šçš„æ–¹æ³•ï¼š</strong></p> <ul><li>Array.prototype.find() æ‰¾æ•°ç»„ä¸­æ˜¯å¦æœ‰æ»¡è¶³æ¡ä»¶çš„å†…å®¹ï¼Œè¿”å› true/false</li> <li>Array.prototype.findIndex() æ‰¾æ•°ç»„ä¸­æ˜¯å¦æœ‰æ»¡è¶³æ¡ä»¶çš„å†…å®¹ï¼Œè¿”å› åæ ‡/-1</li> <li>Array.prototype.includes() æ‰¾æ•°ç»„ä¸­æ˜¯å¦æœ‰æ»¡è¶³æ¡ä»¶çš„å†…å®¹ï¼ˆâ£ï¸å’Œfindä¸ä¸€æ ·çš„æ˜¯ï¼Œè¿™ä¸ªå†…éƒ¨åˆ¤æ–­ä¾æ®æ˜¯ ==ï¼Œè€Œ findåˆ¤æ–­ä¾æ®æ˜¯ ===ï¼‰
<ul><li>ä¹Ÿå°±æ˜¯è¿™ä¸ªå¯ä»¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨ NaN</li></ul></li> <li>Array.prototype.fill() ä¼ å…¥ä¸€ä¸ªæ•°ï¼Œè¿™ä¸ªæ•°ç»„æ¯ä¸€é¡¹ éƒ½ä¼šå˜æˆè¿™ä¸ªæ•°</li> <li>Array.prototype.flat() é™çº¬æ•°ç»„ï¼Œå‚æ•°å¦‚æœæ˜¯Infinityå¯ä»¥æŠŠä»»æ„çº¬åº¦ï¼Œé™åˆ°ä¸€ç»´</li> <li>Array.prototype.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">// åšä¸ªé¢˜å§ [1,2,3] å˜æˆ [1,0,2,0,0,3,0,0,0] ï¼ˆ1åé¢åŠ ä¸Š1ä¸ª0ï¼Œ2åé¢åŠ ä¸Š2ä¸ª0ï¼Œ3åé¢åŠ ä¸Š3ä¸ª0ï¼‰</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span> <span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>item<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//  [1, 0, 2, 0, 0, 3, 0, 0, 0]</span>

</code></pre></div><hr> <h3 id="_3-è§£æ„èµ‹å€¼è¯¦è§£"><a href="#_3-è§£æ„èµ‹å€¼è¯¦è§£" class="header-anchor">#</a> 3.è§£æ„èµ‹å€¼è¯¦è§£</h3> <p>æˆ‘çœ‹ç€è¿™ä¸ªåŠŸèƒ½ï¼Œçœ‹ä¸åˆ°åº•å±‚ï¼Œåªèƒ½çœ‹è¿™ä¸ªçš„è§„åˆ™</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">// ç»“æ„å¯¹è±¡</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'æœ±æ˜†é¹'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">21</span>
<span class="token punctuation">}</span>

<span class="token punctuation">{</span> name<span class="token punctuation">,</span> age <span class="token punctuation">}</span> <span class="token operator">=</span> obj <span class="token comment">// name = 'æœ±æ˜†é¹', age = 20</span>
<span class="token punctuation">{</span> name<span class="token operator">:</span> onName<span class="token punctuation">,</span> age<span class="token operator">:</span> onAge <span class="token punctuation">}</span> <span class="token operator">=</span> obj <span class="token comment">// onName = 'æœ±æ˜†é¹', onAge = 20</span>
<span class="token punctuation">{</span> name<span class="token operator">:</span> onName<span class="token punctuation">,</span> age<span class="token operator">:</span> onAge<span class="token punctuation">,</span> sex <span class="token operator">=</span> <span class="token string">'man'</span> <span class="token punctuation">}</span> <span class="token operator">=</span> obj <span class="token comment">// onName = 'æœ±æ˜†é¹', onAge = 20, sex = 'man'</span>


<span class="token comment">// è§£æ„æ•°ç»„</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token punctuation">{</span>x <span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">}</span> <span class="token operator">=</span> arr <span class="token comment">// undefined</span>
<span class="token punctuation">{</span><span class="token number">0</span><span class="token operator">:</span> x <span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">:</span> y<span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">:</span> z<span class="token punctuation">}</span> <span class="token operator">=</span> arr <span class="token comment">// x = 1, y = 2, z = 3</span>
<span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">]</span> <span class="token operator">=</span> arr <span class="token comment">// x = 1, y = 2, z = 3</span>
<span class="token punctuation">{</span> length <span class="token punctuation">}</span> <span class="token operator">=</span> arr <span class="token comment">// length = 3</span>

</code></pre></div><hr> <p><strong>â£ï¸æœ¬è´¨ä¸Šæ˜¯æ¨¡å¼åŒ¹é…ï¼Œä¸»è¦æ˜¯ä¸ºäº†è®©ä½ æ›´æ–¹ä¾¿çš„æ‹¿åˆ°æ•°æ®ï¼Œç®€åŒ–ä»£ç </strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ç¤ºä¾‹</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'æœ±æ˜†é¹'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">21</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä¸ç”¨è§£æ„èµ‹å€¼çš„æ—¶å€™</span>
<span class="token keyword">let</span> name <span class="token operator">=</span> obj<span class="token punctuation">.</span>data<span class="token punctuation">.</span>name
<span class="token keyword">let</span> age <span class="token operator">=</span> obj<span class="token punctuation">.</span>data<span class="token punctuation">.</span>age

<span class="token comment">// ä½¿ç”¨è§£æ„èµ‹å€¼</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> age <span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">.</span>data

</code></pre></div><hr> <h3 id="_4-ç®­å¤´å‡½æ•°"><a href="#_4-ç®­å¤´å‡½æ•°" class="header-anchor">#</a> 4.ç®­å¤´å‡½æ•°</h3> <p><strong>ç‰¹ç‚¹</strong></p> <ul><li>ä¸ç”¨å†™functionå…³é”®å­—</li> <li>å¯ä»¥ä¸å†™returnï¼ˆå¦‚æœä¸æ˜¯ä¸€æ ·çš„è¯ï¼Œä¸å†™çš„è¯ï¼Œå°±ä¼šåœ¨æœ€åä¸€æ ·è¿”å› return undefinedï¼‰</li> <li>å‚æ•°ä¸èƒ½é‡å¤</li> <li>åªèƒ½ä½œä¸ºå‡½æ•°ï¼Œä¸èƒ½ new ï¼Œæ²¡æœ‰åŸå‹</li> <li>â£ï¸å†…éƒ¨çš„ this ç”±å®šä¹‰æ—¶å¤–å›´æœ€æ¥è¿‘ä¸€å±‚çš„éç®­å¤´å‡½æ•°çš„ this ç»„æˆï¼ˆç®­å¤´å‡½æ•°å¤–å±‚æ²¡æœ‰åŒ…ç€functionï¼Œé‚£ä¹ˆæ’ä¸ºthisï¼‰</li> <li>â£ï¸ç®­å¤´å‡½æ•°æ²¡æœ‰ argumentsï¼Œä½†æ˜¯æœ‰æ‹“å±•å‚æ•°ï¼Œæ˜¯ES6ç”¨æ¥å–ä»£ argumentsçš„</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">const</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span>  <span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span>  <span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>num1 <span class="token operator">+</span> num2<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// â£ï¸è¿”å›çš„å¦‚æœæ˜¯ä¸€è¡Œï¼Œå¹¶ä¸”æ˜¯å¯¹è±¡çš„æ—¶å€™ï¼Œè¯­æ³•å¯èƒ½ä¼šæŠ¥é”™ï¼Œè¿™æ—¶å€™ï¼Œå°±è¦åŠ ä¸€ä¸ª () åœ¨å¤–é¢äº†</span>

<span class="token keyword">const</span> <span class="token function-variable function">fn1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// arguments æ²¡å®šä¹‰ | this æ˜¯ window</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">fn2</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">fn1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// fn2 çš„ arguments | this æ˜¯ objï¼ˆå› ä¸ºç®­å¤´å‡½æ•°å¤–å±‚æœ‰ function å‡½æ•° ğŸ”¥ï¼‰</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><hr> <p><strong>æ‹“å±•å‚æ•°</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// æ³¨æ„äº‹é¡¹ï¼Œ...args å¿…é¡»æ”¾åˆ°å°¾éƒ¨æ‰è¡Œï¼Œåé¢ä¸èƒ½è·Ÿä»»ä½•å‚æ•°ï¼ˆå‰é¢å¯ä»¥åŠ ï¼Œè¿™æ ·æ‹“å±•å‚æ•°å°±æ˜¯å‰©ä¸‹çš„å‚æ•°ï¼‰</span>
<span class="token keyword">const</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token comment">// argsæ˜¯ä¸€ä¸ªçœŸæ­£çš„æ•°ç»„ï¼Œè€Œargumentsæ˜¯ç±»æ•°ç»„</span>
  args<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span> <span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>
</code></pre></div><hr> <p><strong>babelç¼–è¯‘ä¹‹åçš„ç®­å¤´å‡½æ•°ï¼ˆç®­å¤´å‡½æ•°å°±å°±æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼‰</strong></p> <hr> <h3 id="_5-å¯¹è±¡çš„æ‹“å±•"><a href="#_5-å¯¹è±¡çš„æ‹“å±•" class="header-anchor">#</a> 5.å¯¹è±¡çš„æ‹“å±•</h3> <p><strong>Objectæ–°å¢çš„é™æ€æ–¹æ³•</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span> c<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> d<span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span>

<span class="token comment">// Object.assign() æµ…æ‹·è´</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>obj1<span class="token punctuation">,</span> obj2<span class="token punctuation">)</span> <span class="token comment">// å’Œæ‹“å±•è¿ç®—ç¬¦å†™æ³•åŸºæœ¬ä¸€æ ·ï¼Œä¸ä¸€æ ·çš„åœ¨äºï¼Œè¿™ä¸ªä¼šæ”¹å˜å‚æ•°ä¸€çš„å€¼</span>
obj1 <span class="token comment">// { a: 1, b: 2, c: 3, d: 4 } | Object.assign({}, obj1, obj2) è¿™æ ·å†™</span>

Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span> <span class="token comment">// [a, b]</span>
Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span> <span class="token comment">// [1, 2]</span>
Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span> <span class="token comment">// [ ['a', 1], ['b', 2] ]</span>

Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token comment">// true | Number.isNaN()ä¹Ÿèƒ½åˆ¤æ–­</span>
Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// false | </span>
</code></pre></div><hr> <h3 id="ğŸ”¥6-object-defineproperty"><a href="#ğŸ”¥6-object-defineproperty" class="header-anchor">#</a> ğŸ”¥6.Object.defineProperty</h3> <ul><li>ç®€ä»‹ï¼šES5è§„èŒƒå¼€å§‹ï¼Œåç»­ç‰ˆæœ¬è¿­ä»£ï¼Œè‡´åŠ›äºåšä¸€ä»¶äº‹æƒ…ï¼Œå°±æ˜¯æŠŠJSåº•å±‚çš„åŠŸèƒ½æä¾›ç»™å¼€å‘è€…ä½¿ç”¨ã€‚</li> <li>Object.defineProperty å°±æ˜¯å…¶ä¸­çš„ä¸€ä¸ªï¼ˆä¹‹å‰æ˜¯æµè§ˆå™¨å†…éƒ¨ä½¿ç”¨çš„ï¼Œå¼€å‘è€…æ²¡åŠæ³•ä½¿ç”¨ï¼‰ï¼Œæ­¤æ–¹æ³•ä¼šç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°çš„å…·æœ‰è¯¦ç»†æè¿°çš„å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œå¹¶è¿”å›è¿™ä¸ªå¯¹è±¡</li> <li>ä½¿ç”¨
<ul><li>æ•°æ®æè¿°ç¬¦
<ul><li>value: 'xxx' å±æ€§å€¼ | é»˜è®¤ ''</li> <li>writable: true æ˜¯å¦å¯å†™ | é»˜è®¤ false</li> <li>configurable: true æ˜¯å¦å¯é…ç½® | é»˜è®¤ false</li> <li>enumerable: true æ˜¯å¦å¯æšä¸¾ | é»˜è®¤ false</li></ul></li> <li>å­˜å–æè¿°ç¬¦
<ul><li>set: function () {} å±æ€§è®¿é—®å™¨ è¿›è¡Œå†™æ“ä½œæ—¶è°ƒç”¨è¯¥æ–¹æ³•</li> <li>get: function () {} å±æ€§è®¿é—®å™¨ è¿›è¡Œè¯»æ“ä½œæ—¶è°ƒç”¨è¯¥æ–¹æ³•</li></ul></li></ul></li></ul> <hr> <p><strong>ä¹‹å‰æµè§ˆå™¨ å†…éƒ¨ä½¿ç”¨ Object.defineProperty çš„ç¤ºä¾‹</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ä¸å¯å†™çš„æ¡ˆä¾‹</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token string">'ä¸å¯å†™'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token comment">// Æ’ () { [native code] } | æ²¡å˜</span>

<span class="token comment">// ä¸å¯é…ç½®æ¡ˆä¾‹</span>
window<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">delete</span> window<span class="token punctuation">.</span>a <span class="token comment">// false</span>

<span class="token comment">// å¯æšä¸¾æ¡ˆä¾‹</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'æœ±æ˜†é¹'</span><span class="token punctuation">,</span>
  __proto__<span class="token operator">:</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> <span class="token number">20</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> prop <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>prop<span class="token punctuation">)</span> <span class="token comment">// name age</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä¸å¯æšä¸¾çš„æ¡ˆä¾‹</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> prop <span class="token keyword">in</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>prop<span class="token punctuation">)</span> <span class="token comment">// è™½ç„¶ Object.prototype ä¸Šæœ‰å¾ˆå¤šå¯¹è±¡ ï¼Œä½†æ˜¯ç»“æœæ˜¯ æ— </span>
<span class="token punctuation">}</span>

</code></pre></div><hr> <p><strong>Object.defineProperty æ•°æ®æè¿°ç¬¦</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// name: 'æœ±æ˜†é¹' // å¦‚æœå†™ä¸Šçš„è¯ï¼Œé»˜è®¤é…ç½®éƒ½æ˜¯ true</span>
<span class="token punctuation">}</span>

<span class="token comment">// å‚æ•°ä¸€ï¼šå¯¹è±¡ | å‚æ•°äºŒï¼šå±æ€§å | å‚æ•°ä¸‰ï¼šå¯¹è¿™ä¸ªå±æ€§çš„ é…ç½®</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    value<span class="token operator">:</span> <span class="token string">'æœ±æ˜†é¹'</span><span class="token punctuation">,</span>
    writable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// æ˜¯å¦å¯å†™ | é»˜è®¤ false</span>
    configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//æ˜¯å¦å¯é…ç½® | é»˜è®¤ false</span>
    enumerable<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// æ˜¯å¦å¯æšä¸¾ | é»˜è®¤ false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token number">1</span>
obj<span class="token punctuation">.</span>name <span class="token comment">// æœ±æ˜†é¹</span>

<span class="token keyword">delete</span> obj<span class="token punctuation">.</span>name <span class="token comment">// true</span>
obj<span class="token punctuation">.</span>name <span class="token comment">// {}</span>
</code></pre></div><hr> <p><strong>Object.defineProperty å­˜å–æè¿°ç¬¦</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// name: 'æœ±æ˜†é¹' // å¦‚æœå†™ä¸Šçš„è¯ï¼Œé»˜è®¤é…ç½®éƒ½æ˜¯ true</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> tempValue <span class="token operator">=</span> <span class="token string">'æœ±æ˜†é¹ get'</span>
<span class="token comment">// å‚æ•°ä¸€ï¼šå¯¹è±¡ | å‚æ•°äºŒï¼šå±æ€§å | å‚æ•°ä¸‰ï¼šå¯¹è¿™ä¸ªå±æ€§çš„ é…ç½®</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">// value: 'æœ±æ˜†é¹',</span>
    <span class="token comment">// writable: false, // æ˜¯å¦å¯å†™ | é»˜è®¤ false</span>
    configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//æ˜¯å¦å¯é…ç½® | é»˜è®¤ false</span>
    enumerable<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// æ˜¯å¦å¯æšä¸¾ | é»˜è®¤ false</span>

    <span class="token comment">// set , get å’Œ value writable ä¸èƒ½å…±å­˜ï¼ˆä¼šæŠ¥é”™ï¼‰</span>
    <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      tempValue <span class="token operator">=</span> newValue
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> tempValue
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment">// å¦ä¸€ç§å†™æ³•</span>
<span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  tempValue<span class="token operator">:</span> <span class="token string">'æœ±æ˜†é¹'</span><span class="token punctuation">,</span>
  <span class="token keyword">get</span> <span class="token function">name</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tempValue
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span> <span class="token function">name</span> <span class="token punctuation">(</span><span class="token parameter">newValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>tempValue <span class="token operator">=</span> newValue
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

obj1<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'æµ‹è¯•'</span>
obj1 <span class="token comment">// {tempValue: 'æµ‹è¯•', name: 'æµ‹è¯•'}</span>
</code></pre></div><p><strong>â£ï¸æˆ‘è§‰å¾—è¿™ä¸ªå†™æ³•å®šä¹‰äº†ä¸€ä¸ªå¤šä½™çš„å˜é‡ï¼Œä¸æ˜¯å¾ˆå¥½ï¼Œè‚¯å®šæœ‰æ›´å¥½çš„æ–¹æ³•ï¼Œæˆ‘è¿˜æ˜¯å¤šå­¦ä¹ ä¸€ä¸‹å§</strong></p> <hr> <h3 id="ğŸ”¥7-æ•°æ®åŠ«æŒ"><a href="#ğŸ”¥7-æ•°æ®åŠ«æŒ" class="header-anchor">#</a> ğŸ”¥7.æ•°æ®åŠ«æŒ</h3> <ul><li>VueåŒå‘æ•°æ®ç»‘å®šæ ¸å¿ƒåŠŸèƒ½æ˜¯ç”± Observer, Compile, Watcher ä¸‰éƒ¨åˆ†å®ç°</li> <li>å…¶ä¸­ Observerï¼ˆç›‘å¬æ•°æ®å˜åŒ–è¿›è¡Œç›¸åº”çš„å›è°ƒ - æ•°æ®åŠ«æŒï¼‰ éƒ¨åˆ†åŠŸèƒ½å°±æ˜¯ç”¨ Object.defineProperty æ¥å®ç°çš„ï¼ˆVue2.xä¹‹åç”¨ Proxy&amp;Reflect é‡æ„äº†ï¼‰</li></ul> <p><strong>æˆ‘ä»¬æ¥åšä¸€ä¸ªæ¡ˆä¾‹ï¼šå½“æˆ‘ä»¬çš„æ•°æ®æ”¹å˜çš„æ—¶å€™ï¼Œè®©è§†å›¾ï¼ˆé¡µé¢ï¼‰ä¹Ÿéšä¹‹æ”¹å˜</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inputDemo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>divDemo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        
        <span class="token keyword">let</span> oInput <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'inputDemo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> oDiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'divDemo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
            name<span class="token operator">:</span> <span class="token string">'æœ±æ˜†é¹'</span><span class="token punctuation">,</span>
            me<span class="token operator">:</span> <span class="token punctuation">{</span>
                age<span class="token operator">:</span> <span class="token number">20</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">upData</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            oDiv<span class="token punctuation">.</span>innerText <span class="token operator">=</span> obj<span class="token punctuation">.</span>me<span class="token punctuation">.</span>age
        <span class="token punctuation">}</span>
        
        <span class="token comment">// æ£€æµ‹å¯¹è±¡çš„æŸä¸ªå±æ€§æ˜¯å¦å‘ç”Ÿæ”¹å˜</span>
        <span class="token keyword">function</span> <span class="token function">Observer</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data <span class="token operator">||</span> <span class="token keyword">typeof</span> data <span class="token operator">!=</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> data<span class="token punctuation">;</span>

            Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span> <span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">definedRective</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> key<span class="token punctuation">,</span> data<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>

        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">definedRective</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> key<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">Observer</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token comment">// é€’å½’ï¼Œè¿™æ ·è®©æ·±å±‚æ¬¡å¯¹è±¡å…·æœ‰ç›‘æ§ä½œç”¨</span>

            Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
                <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> val
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>newValue <span class="token operator">==</span> val<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
                    val <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
                    <span class="token function">upData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// æ‰§è¡Œæ”¹å˜è§†å›¾</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//ï¼ˆäº‹ä»¶ï¼‰è¾“å…¥æ¡†æ”¹å˜äº‹ä»¶</span>
        oInput<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            obj<span class="token punctuation">.</span>me<span class="token punctuation">.</span>age <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

        <span class="token function">Observer</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
        <span class="token function">upData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><img src="https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/2.notes/3.JavaScript/ES6%E4%BB%A5%E5%8F%8AJS%E5%86%85%E7%BD%AE%E6%96%B9%E6%B3%95%E6%A2%B3%E7%90%86/1Object.defineProperty%E5%AE%9E%E7%8E%B0%E5%8F%8C%E5%90%91%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A.gif"> <hr> <p><strong>æ€è€ƒï¼šVueæ˜¯æ€ä¹ˆç›‘å¬åˆ° æ•°ç»„ä¸­æ”¹å˜çš„å‘¢ï¼Ÿ</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// åœ¨Vueä¸­ æ•°ç»„ä¸­æ”¹å˜æƒ³è¦ç›‘å¬ï¼Œéœ€è¦ç”¨ç‰¹å®šçš„æ–¹æ³•ï¼Œä¾‹å¦‚ push pop unshift shift...ç­‰ç­‰</span>
<span class="token comment">// åŸç†æ˜¯ Vue é‡å†™äº†è¿™äº›æ–¹æ³•</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span>property<span class="token punctuation">,</span> <span class="token string">'push'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><hr> <h3 id="ğŸ”¥8-proxy-reflect"><a href="#ğŸ”¥8-proxy-reflect" class="header-anchor">#</a> ğŸ”¥8.Proxy &amp; Reflect</h3> <ul><li>è¿™ä¸ªä¸œè¥¿æœ‰å…¼å®¹æ€§é—®é¢˜ï¼Œä½ å¯èƒ½ä¼šæƒ³äº†ï¼Œå¯ä»¥é€šè¿‡ babel è¿›è¡Œç¼–è¯‘ï¼Œç¼–è¯‘æˆES5ä¸å°±å¯ä»¥äº†ä¹ˆï¼Œä½†æ˜¯ babel ç¼–è¯‘æœ¬è´¨ä¸Šæ˜¯å°† ES6è¯­æ³•ç³–ç¼–æˆ ES5ä»£ç ï¼Œä½†æ˜¯ Proxy å’Œ Reflect ä¸æ˜¯è¯­æ³•ç³–ï¼Œè¿™æ˜¯æµè§ˆå™¨å†…éƒ¨å®ç°çš„ä¸œè¥¿ï¼Œç¼–è¯‘ä¹‹åå…¶å®è¿˜æ˜¯ä»–ä»¬æœ¬èº«</li></ul> <p><strong>Proxyï¼ˆä»£ç†ï¼‰</strong></p> <ul><li>æ¤å…¥ä»£ç†æ¨¡å¼çš„æ€æƒ³ï¼Œä»¥ç®€æ´æ˜“æ‡‚çš„æ–¹å¼æ§åˆ¶å¯¹å¤–éƒ¨å¯¹è±¡çš„è®¿é—®</li> <li>åˆ©ç”¨å†…ç½®çš„ set, get æ–¹æ³•æ§åˆ¶å±æ€§çš„è¯»å†™åŠŸèƒ½ç”¨å¤„æ¯”è¾ƒå¤§ï¼Œå…¶ä½™ has, delePropery...ç­‰æ–¹æ³•ä¸å¤ªåœ¨å·¥ä½œå¼€å‘ä¸­ä½¿ç”¨ï¼Œæœ‰å…´è¶£å¯ä»¥äº†è§£ä¸‹</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inputDemo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>divDemo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        
        <span class="token keyword">let</span> oInput <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'inputDemo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> oDiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'divDemo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
            name<span class="token operator">:</span> <span class="token string">'æœ±æ˜†é¹'</span><span class="token punctuation">,</span>
            me<span class="token operator">:</span> <span class="token punctuation">{</span>
                age<span class="token operator">:</span> <span class="token number">20</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">upData</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            oDiv<span class="token punctuation">.</span>innerText <span class="token operator">=</span> objProxy<span class="token punctuation">.</span>name
        <span class="token punctuation">}</span>

        <span class="token keyword">let</span> objProxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token comment">// å‚æ•°ä¸€ï¼šå¯¹è±¡æœ¬èº« | å‚æ•°äºŒï¼šå¯¹è±¡çš„ å±æ€§å | å‚æ•°ä¸‰ï¼šèµ‹çš„å€¼ | å‚æ•°å››ï¼šä¸€ä¸ªProxyæ ¼å¼çš„å¯¹è±¡</span>
            <span class="token function">set</span> <span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">upData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// æ‰§è¡Œæ”¹å˜è§†å›¾</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">// å‚æ•°ä¸€ï¼šå¯¹è±¡æœ¬èº« | å‚æ•°äºŒï¼šå¯¹è±¡çš„ å±æ€§å | å‚æ•°ä¸‰ï¼šä¸€ä¸ªProxyæ ¼å¼çš„å¯¹è±¡</span>
            <span class="token function">get</span> <span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

        <span class="token comment">//ï¼ˆäº‹ä»¶ï¼‰è¾“å…¥æ¡†æ”¹å˜äº‹ä»¶</span>
        oInput<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            objProxy<span class="token punctuation">.</span>name <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

        <span class="token function">upData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>â£ï¸ obj.me.age Proxyç›‘å¬ä¸åˆ°å˜åŒ–ï¼Œè¿™æ€ä¹ˆåŠï¼Ÿ</strong></p> <hr> <h3 id="_9-class-é¢å‘å¯¹è±¡"><a href="#_9-class-é¢å‘å¯¹è±¡" class="header-anchor">#</a> 9.Classï¼ˆé¢å‘å¯¹è±¡ï¼‰</h3> <p><strong>ES5æ—¶ä»£çš„ é¢å‘å¯¹è±¡</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å·¥å‚æ¨¡å¼ åˆ›å»ºå¯¹è±¡</span>
<span class="token keyword">function</span> <span class="token function">Preson</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'äºº'</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ–¹æ³•å†™åˆ°åŸå‹é“¾ä¸Š</span>
<span class="token class-name">Preson</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è¯´è¯'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token comment">// =======+ ES5 ç»§æ‰¿ +=========</span>
<span class="token comment">// åœ£æ¯æ¨¡å¼ç»§æ‰¿æ–¹æ³•</span>
</code></pre></div><hr> <p><strong>ES6æ—¶ä»£ é¢å‘å¯¹è±¡</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Preson</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name <span class="token operator">||</span> <span class="token string">'äºº'</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age <span class="token operator">||</span> <span class="token number">20</span>
  <span class="token punctuation">}</span>
  <span class="token function">say</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è¯´'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ES7 æ‰èƒ½è¿™ä¹ˆå†™ static name = 'äºº'ï¼Œ ES6 åªèƒ½å†™å‡½æ•°</span>
  <span class="token comment">// é™æ€å†™æ³•</span>
  <span class="token keyword">static</span> <span class="token function">name</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'äºº'</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ES7 ç§æœ‰å±æ€§</span>
  <span class="token comment">// name = 10</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Zhu</span> <span class="token keyword">extends</span> <span class="token class-name">Preson</span><span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">sex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> sex <span class="token operator">||</span> <span class="token string">'ç”·'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> zhukunpeng <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Zhu</span><span class="token punctuation">(</span><span class="token string">'æœ±æ˜†é¹'</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token string">'ç”·'</span><span class="token punctuation">)</span> <span class="token comment">// {name: &quot;äºº&quot;, age: 20, sex: &quot;æœ±æ˜†é¹&quot;}</span>
</code></pre></div><hr> <p><strong>ES5 æ¨¡æ‹ŸClass</strong></p> <p>ç•¥...</p> <hr> <p><strong>ES7 Classï¼ˆææ¡ˆï¼Œæœ€æ–°çš„æµè§ˆå™¨æœ‰çš„ä¹Ÿæ²¡æ”¯æŒï¼Œéœ€è¦babelé™çº§ï¼Œå…ˆäº†è§£å§ï¼‰</strong></p> <ul><li>static property = xxx é™æ€å±æ€§</li> <li>property = xxx ç§æœ‰å±æ€§</li> <li>@decorator è£…é¥°å™¨</li></ul> <hr> <h3 id="_10-set"><a href="#_10-set" class="header-anchor">#</a> 10.Set</h3> <ul><li>ç®€ä»‹ï¼šSetæ˜¯ES6æä¾›ç»™æˆ‘ä»¬çš„ä¸€ä¸ªæ„é€ å‡½æ•°ï¼ˆéœ€è¦newï¼‰ï¼Œèƒ½æ„é€ å‡ºä¸€ç§æ–°çš„å­˜å‚¨æ•°æ®çš„ç»“æ„</li> <li>ç‰¹ç‚¹ï¼šåªæœ‰å±æ€§å€¼ï¼ˆå’Œæ•°ç»„å·®ä¸å¤š 0:... è¿™æ ·çš„ï¼‰ï¼Œæˆå‘˜å€¼å”¯ä¸€ï¼ˆä¸é‡å¤ï¼‰</li> <li>ç”¨é€”ï¼šå¯ä»¥è½¬æˆæ•°ç»„ï¼Œå…¶æœ¬èº«å…·å¤‡å»é‡ï¼Œå–äº¤é›†ï¼Œå¹¶é›†ï¼Œå·®é›†çš„é”™ç”¨</li> <li>å¤‡æ³¨ï¼š
<ul><li>babelæ— æ³•é™çº§ï¼ˆç¼–è¯‘ä¹‹åè¿˜æ˜¯å®ƒæœ¬èº«ï¼‰ï¼Œå› ä¸ºå’Œ proxy ä¸€æ ·ï¼Œå±äºæµè§ˆå™¨å†…ç½®çš„å®ç°</li> <li>new Set() å‚æ•°å¿…é¡»è¦æ˜¯ å…·æœ‰è¿­ä»£æ¥å£çš„ï¼ˆæ•°ç»„æ˜¯ï¼Œå­—ç¬¦ä¸²æ˜¯ï¼ŒSetä¹Ÿæ˜¯ï¼Œ......ï¼‰(åŸå‹ä¸Šå…·å¤‡ Symbolçš„å°±æ˜¯å…·å¤‡è¿­ä»£æ¥å£)</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">let</span> setArr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span> <span class="token comment">// Set(3) {&quot;a&quot;, &quot;b&quot;, &quot;c&quot;}</span>

<span class="token comment">// æ·»åŠ  add()</span>
setArr<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'z'</span><span class="token punctuation">)</span> <span class="token comment">// {&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;z&quot;}</span>
setArr<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span> <span class="token comment">// {&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;z&quot;}</span>

<span class="token comment">// åˆ é™¤ delete()</span>
setArr<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">'z'</span><span class="token punctuation">)</span> <span class="token comment">// true {&quot;a&quot;, &quot;b&quot;, &quot;c&quot;}</span>

<span class="token comment">// æ¸…ç©º clear()</span>
setArr<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Set(0) {}</span>

<span class="token comment">// åˆ¤æ–­æœ‰æ²¡æœ‰æŸå€¼ has() | æ•°ç»„ä¸­å¯ä»¥ç”¨ some() every()</span>
setArr<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">'z'</span><span class="token punctuation">)</span> <span class="token comment">// fasle</span>

<span class="token comment">// éå† forEach()</span>
setArr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token comment">// a | b  c</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// æ‹“å±•ï¼šè¿­ä»£æ¥å£éå† for of</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> prop <span class="token keyword">of</span> setArr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>prop<span class="token punctuation">)</span> <span class="token comment">// a | b  c</span>
<span class="token punctuation">}</span>

<span class="token comment">// ğŸ”¥Set å’Œ æ•°ç»„çš„è½¬æ¢</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> setArr2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">// æ•°ç»„ ---ã€‹ Set</span>
<span class="token operator">...</span>setArr2 <span class="token comment">// Set ---ã€‹æ•°ç»„</span>
Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>setArr2<span class="token punctuation">)</span> <span class="token comment">// ğŸ”¥èƒ½æŠŠç±»æ•°ç»„ï¼Œå’Œå…·å¤‡è¿­ä»£æ¥å£çš„ç±»å‹ï¼Œè½¬ä¸º æ•°ç»„</span>

</code></pre></div><hr> <p><strong>ğŸ”¥Setåº”ç”¨åœºæ™¯</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">// æ•°ç»„å»é‡</span>
<span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment">// [2, 3, 4, 5, 6, 1]</span>


<span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>

<span class="token comment">// å¹¶é›†</span>
<span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>arr1<span class="token punctuation">,</span> <span class="token operator">...</span>arr2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment">// [1, 2, 3, 3, 4, 5]</span>

<span class="token comment">// äº¤é›†</span>
<span class="token keyword">let</span> setArr1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span>
<span class="token keyword">let</span> setArr2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token operator">...</span>setArr1<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> setArr2<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [3]</span>

<span class="token comment">// å·®é›†</span>
<span class="token keyword">let</span> setArr1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span>
<span class="token keyword">let</span> setArr2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token operator">...</span>setArr1<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>setArr2<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [1, 2]</span>
<span class="token punctuation">[</span><span class="token operator">...</span>setArr2<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>setArr1<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [4, 5]</span>
<span class="token comment">// æŠŠä¸Šé¢ åˆå¹¶å°±å¥½äº†</span>

</code></pre></div><hr> <h3 id="_11-map-é”®å€¼å¯¹"><a href="#_11-map-é”®å€¼å¯¹" class="header-anchor">#</a> 11.Mapï¼ˆé”®å€¼å¯¹ï¼‰</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> pres <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
pres<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token string">'æœ±æ˜†é¹'</span><span class="token punctuation">)</span>
pres<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>age<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>


</code></pre></div><hr> <h3 id="_12-symbol"><a href="#_12-symbol" class="header-anchor">#</a> 12.Symbol</h3> <p>è¿™æ˜¯ä¸€ç§æ–°çš„æ•°æ®ç±»å‹ï¼ˆES9æˆ–è€…å…¶ä»–ç‰ˆæœ¬ä¸­ï¼Œæœ‰bigintè¿™ä¸ªç±»å‹ï¼‰</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ç”¨å¤„ï¼šå½“åšå¯¹è±¡çš„å”¯ä¸€é”®å€¼</span>
<span class="token keyword">const</span> s1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>s1<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">'æœ±æ˜†é¹'</span>
<span class="token punctuation">}</span>

obj<span class="token punctuation">[</span>s1<span class="token punctuation">]</span> <span class="token comment">// æœ±æ˜†é¹</span>
</code></pre></div><hr> <h3 id="ğŸ”¥13-å¼‚æ­¥ç¼–ç¨‹"><a href="#ğŸ”¥13-å¼‚æ­¥ç¼–ç¨‹" class="header-anchor">#</a> ğŸ”¥13.å¼‚æ­¥ç¼–ç¨‹</h3> <h5 id="_1-promiseåˆæ¢"><a href="#_1-promiseåˆæ¢" class="header-anchor">#</a> 1.promiseåˆæ¢</h5> <ul><li>å¼‚æ­¥ç¼–ç¨‹æ¦‚å¿µï¼š
<ul><li>æ— è®ºæ˜¯æµè§ˆå™¨è¿˜æ˜¯Nodeç¯å¢ƒä¸­ï¼Œéƒ½ä¼šä½¿ç”¨JavaScriptè¿›è¡Œå¼‚æ­¥æ“ä½œï¼Œä¾‹å¦‚å®šæ—¶å™¨ï¼Œäº‹ä»¶ï¼Œajaxï¼Œæˆ–è€…nodeç¯å¢ƒä¸­çš„æ–‡ä»¶è¯»å–ç­‰</li> <li>éšç€å¼‚æ­¥ç¼–ç¨‹çš„å°±æ˜¯å›è°ƒæœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯è¯´å¼‚æ­¥é¿å…ä¸äº†è¦ä½¿ç”¨å›è°ƒ</li></ul></li> <li>å¼‚æ­¥ç¼–ç¨‹çš„é—®é¢˜
<ul><li>äº§ç”Ÿå›è°ƒåœ°ç‹±ï¼Œéš¾äºç»´æŠ¤å’Œæ‹“å±•</li> <li>try catchåªèƒ½æ•è·åŒæ­¥ä»£ç ä¸­å‡ºç°çš„å¼‚å¸¸</li> <li>åŒæ­¥å¹¶å‘çš„å¼‚æ­¥å­˜åœ¨ä¸€å®šçš„é—®é¢˜</li></ul></li></ul> <p><strong>Promiseä»‹ç»</strong></p> <ul><li>ES6 çš„ promise å¯ä»¥è§£å†³å›è°ƒåœ°ç‹±ï¼Œä»¥åŠåŒæ­¥å¹¶å‘çš„å¼‚æ­¥é—®é¢˜ï¼ˆå¼‚æ­¥æ“ä½œçš„å¼‚å¸¸æ•è·æœ‰å…¶ä»–æ–¹æ³•è§£å†³ï¼‰</li> <li>ä½†ä¾æ—§ä¼šæœ‰æ˜æ˜¾çš„å›è°ƒç—•è¿¹ï¼Œä¹‹åå­¦ä¹  async/await å°±èƒ½è®©å¼‚æ­¥ä»£ç çœ‹èµ·æ¥å’ŒåŒæ­¥ä¸€æ ·</li></ul> <hr> <h5 id="_2-å¼‚æ­¥çš„ä½¿ç”¨åœºæ™¯-æˆ‘ä»¬ä½¿ç”¨nodeæ¥è¯•è¯•"><a href="#_2-å¼‚æ­¥çš„ä½¿ç”¨åœºæ™¯-æˆ‘ä»¬ä½¿ç”¨nodeæ¥è¯•è¯•" class="header-anchor">#</a> 2.å¼‚æ­¥çš„ä½¿ç”¨åœºæ™¯ï¼ˆæˆ‘ä»¬ä½¿ç”¨Nodeæ¥è¯•è¯•ï¼‰</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Nodeæ–‡ä»¶è¯»å–ï¼Œæ¼”ç¤ºå¼‚æ­¥ä½¿ç”¨ä¸­ å›è°ƒçš„é—®é¢˜ âŒ</span>

<span class="token comment">// æ–‡ä»¶è¯»å–</span>
<span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./a.js'</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data1</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data1<span class="token punctuation">)</span>  
    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>data1<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data2<span class="token punctuation">)</span>
        fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>data2<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data3</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data3<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment">// å®šæ—¶å™¨ï¼Œæ¼”ç¤ºå¼‚æ­¥ä½¿ç”¨åœºæ™¯ä¸­ æ•è·ä¸åˆ° å¼‚å¸¸çš„é—®é¢˜ âŒ</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token comment">// å¹¶å‘å¼‚æ­¥æ“ä½œï¼ˆæˆ‘ä»¬æƒ³ç­‰æ‰€æœ‰çš„å¼‚æ­¥éƒ½ç»“æŸä¹‹åï¼Œå†å¹²ä¸€ä»¶äº‹æƒ…ï¼‰</span>
<span class="token comment">// æˆ‘æƒ³æƒ³è¯»å‡ ä¸ªæ–‡ä»¶ï¼Œç„¶åéœ€è¦ç­‰éƒ½å®Œæˆä¹‹åï¼Œå†åšæ“ä½œï¼Œè¿™ä¸ªåº”è¯¥æ€ä¹ˆåšâ“</span>

<span class="token comment">// è¿™é‡Œæœ‰ä¸ªå‘å¸ƒè®¢é˜…è€…æ¨¡å¼å¾ˆå¥½ç”¨ï¼Œè€Œä¸”é‚£ä¸ª --æ—¶é—´çš„éå¸¸çš„å¦™</span>

</code></pre></div><hr> <h5 id="_3-promiseä½¿ç”¨1"><a href="#_3-promiseä½¿ç”¨1" class="header-anchor">#</a> 3.Promiseä½¿ç”¨1</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ä¼ é€’ä¸€ä¸ªå‚æ•°ï¼Œæ³¨æ„ï¼Œè¿™ä¸ªå‚æ•°æ˜¯ åŒæ­¥æ‰§è¡Œçš„</span>
<span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment">// 0 1</span>
</code></pre></div><p><strong>åŸºæœ¬ä½¿ç”¨</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">,</span> rej</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token function">setTimeout</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">&gt;</span> <span class="token number">60</span> <span class="token operator">?</span> <span class="token function">res</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">rej</span><span class="token punctuation">(</span><span class="token string">'no'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Promise æœ‰ä¸‰ç§çŠ¶æ€ pending è¿›è¡Œæ—¶ | onFulfilled æˆåŠŸ | onRejected å¤±è´¥</span>
<span class="token comment">// â£ï¸ï¼š.then é‡Œé¢çš„å‡½æ•°ï¼Œæ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼ˆæ”¾åˆ°äº†å¾®é˜Ÿåˆ—é‡Œé¢ï¼‰</span>
promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'res'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">rej</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'rej'</span><span class="token punctuation">,</span> rej<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p><strong>é“¾å¼æ“ä½œ</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">,</span> rej</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token function">setTimeout</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">&gt;</span> <span class="token number">60</span> <span class="token operator">?</span> <span class="token function">res</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">rej</span><span class="token punctuation">(</span><span class="token string">'no'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Promise æœ‰ä¸‰ç§çŠ¶æ€ pending è¿›è¡Œæ—¶ | onFulfilled æˆåŠŸ | onRejected å¤±è´¥</span>
<span class="token comment">// â£ï¸ï¼š.then é‡Œé¢çš„å‡½æ•°ï¼Œæ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼ˆæ”¾åˆ°äº†å¾®é˜Ÿåˆ—é‡Œé¢ï¼‰</span>
promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'res'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token number">20</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">rej</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'rej'</span><span class="token punctuation">,</span> rej<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token number">30</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ok:'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token comment">// ok:20 | ok:30</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">rej</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'no:'</span><span class="token punctuation">,</span> rej<span class="token punctuation">)</span> <span class="token comment">// åªæœ‰ä¸Šé¢æŠ›å‡ºé”™è¯¯æ‰ä¼šæ‰§è¡Œåˆ°è¿™é‡Œï¼ˆè¿™é‡Œæœ‰ç‚¹ç»•ï¼Œä½†æ˜¯æ²¡äº‹ï¼‰</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><hr> <h5 id="_4-promiseä½¿ç”¨2"><a href="#_4-promiseä½¿ç”¨2" class="header-anchor">#</a> 4.Promiseä½¿ç”¨2</h5> <ul><li>then() æ³¨å†Œå‡½æ•°è¿”å›å€¼</li> <li>catch() å¼‚å¸¸æ•è·</li> <li>finally() æœ€åå¤„ç†å‡½æ•°</li> <li>Promise.all() åŒæ­¥å¹¶å‘å¼‚æ­¥çš„ç»“æœ</li> <li>Promise.race() è°å…ˆæˆåŠŸå°±å¤„ç†è°</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">,</span> rej</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">res</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'å‡ºé”™'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token comment">// Error: å‡ºé”™ at /Users/zhukunpeng/Desktop/Git-notes/b.js:6:11</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æœ€åå¤„ç†çš„å‡½æ•°'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> 

<span class="token comment">// .catch() ä¸æ˜¯ç»“æŸï¼Œåé¢è¿˜å¯ä»¥è¿›è¡Œ .then() æ“ä½œï¼Œ.finally() æ˜¯æœ€åå¤„ç†çš„å‡½æ•°ï¼Œåé¢ä¸èƒ½ .then() äº†</span>

</code></pre></div><p><strong>Promise.all() &amp;&amp; Promise.rece()</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">readFile</span> <span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">,</span> rej</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token function">res</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Promise.all() å¯ä»¥å°†å¤šä¸ªpromiseå®ä¾‹åŒ…è£…æˆä¸€ä¸ªæ–°çš„ promiseå®ä¾‹</span>
<span class="token comment">// â£ï¸ï¼šå¦‚æœéƒ½æˆåŠŸï¼Œé‚£ä¹ˆä¼šè¿”å›ä¸€ä¸ªåŒ…å«å„ä¸ªæ•°æ®çš„æ•°ç»„</span>
<span class="token comment">// â£ï¸ï¼šå¦‚æœæœ‰å¤±è´¥çš„è¯ï¼Œä¼šè¿”å›ç¬¬ä¸€ä¸ªè§¦å‘å¤±è´¥çš„å€¼çš„å†…å®¹</span>
Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./a.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./b.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./c.js'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// ['a.js', 'b.js', 'c.js']</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

Promise<span class="token punctuation">.</span><span class="token function">rece</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./a.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./b.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./c.js'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// 'a.js' || 'b.js' || 'c.js'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><hr> <h5 id="_5-async-await"><a href="#_5-async-await" class="header-anchor">#</a> 5.async/await</h5> <ul><li>è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡</li> <li>ç±»ä¼¼äºåŒæ­¥çš„ä»£ç ï¼Œæ¥å†™å¼‚æ­¥ä»£ç </li> <li>try catch å¯ä»¥æ•è·åˆ°å¼‚å¸¸</li> <li>åŒæ­¥å¹¶å‘ éœ€è¦å†™é¢å¤–çš„ å‡½æ•°</li></ul> <hr> <h2 id="js-å„ä¸ªå†…ç½®apiåŠŸèƒ½å®ç°"><a href="#js-å„ä¸ªå†…ç½®apiåŠŸèƒ½å®ç°" class="header-anchor">#</a> JS å„ä¸ªå†…ç½®APIåŠŸèƒ½å®ç°</h2> <h3 id="_1-foreachå®ç°"><a href="#_1-foreachå®ç°" class="header-anchor">#</a> 1.forEachå®ç°</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myForEach</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">func</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> _arr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span>
      len <span class="token operator">=</span> _arr<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
      parmas <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> window<span class="token punctuation">;</span>
  
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>parmas<span class="token punctuation">,</span> <span class="token punctuation">[</span>_arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> _arr<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

arr<span class="token punctuation">.</span><span class="token function">myForEach</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> self</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> self<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'123'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// ä½“ä¼šï¼šforEach çš„ä¸»è¦ä½œç”¨è¿˜æ˜¯éå†ï¼Œå¹¶ä¸èƒ½ä¿®æ”¹é‡Œé¢å„ä¸ªçš„å€¼ï¼›map æ‰æ˜¯é‚£ç§å¯ä»¥æ“ä½œæ•°ç»„æ¯ä¸€é¡¹çš„å€¼</span>
</code></pre></div><hr> <h3 id="_2-filter-è¿‡æ»¤"><a href="#_2-filter-è¿‡æ»¤" class="header-anchor">#</a> 2.filterï¼ˆè¿‡æ»¤ï¼‰</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// æ‰§è¡Œå®Œæˆä¹‹åï¼Œä¼šè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ | å‚æ•°å’Œ forEach ä¸€æ ·ï¼Œ ele index self this</span>
<span class="token comment">// æ¯ä¸€é¡¹æ‰§è¡Œä¸­ä¼šè¿”å› true false å¦‚æœæ˜¯ true å°±å°†è¿™ä¸€é¡¹è¿”å›ç»™æœ€åè¿”å›çš„æ–°æ•°ç»„ä¸­</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myFilter</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">func</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">let</span> _arr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span>
      len <span class="token operator">=</span> _arr<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
      parmas <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> window<span class="token punctuation">,</span>
      newArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>parmas<span class="token punctuation">,</span> <span class="token punctuation">[</span>_arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> _arr<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">?</span> newArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>_arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> newArr
<span class="token punctuation">}</span>

<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

arr<span class="token punctuation">.</span><span class="token function">myFilter</span><span class="token punctuation">(</span> <span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [2, 3]</span>
</code></pre></div><hr> <h3 id="_3-map-æ˜ å°„"><a href="#_3-map-æ˜ å°„" class="header-anchor">#</a> 3.mapï¼ˆæ˜ å°„ï¼‰</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myMap</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">func</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">let</span> _arr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span>
      len <span class="token operator">=</span> _arr<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
      params <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> window<span class="token punctuation">,</span>
      newArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    newArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>params<span class="token punctuation">,</span> <span class="token punctuation">[</span>_arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> _arr<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> newArr

<span class="token punctuation">}</span>

<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

arr<span class="token punctuation">.</span><span class="token function">myMap</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// [3, 4, 5]</span>

<span class="token comment">// åˆ°è¿™é‡Œæˆ‘æ‰çŸ¥é“ä¸ºä»€ä¹ˆ Map å¯ä»¥æ§åˆ¶å¾ªç¯æ¯ä¸€ä¸ªçš„å€¼ï¼Œè€ŒforEachä¸è¡Œï¼Œå› ä¸º forEach å°±æ˜¯éå†ç”¨çš„ï¼Œä¸åšè¿”å›çš„æ“ä½œ</span>
</code></pre></div><hr> <h3 id="_4-every-æ˜¯å¦éƒ½ç¬¦åˆè¦æ±‚"><a href="#_4-every-æ˜¯å¦éƒ½ç¬¦åˆè¦æ±‚" class="header-anchor">#</a> 4.everyï¼ˆæ˜¯å¦éƒ½ç¬¦åˆè¦æ±‚ï¼‰</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myEvery</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">func</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> _arr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span>
      len <span class="token operator">=</span> _arr<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
      params <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> window<span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>params<span class="token punctuation">,</span> <span class="token punctuation">[</span>_arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> _arr<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

arr<span class="token punctuation">.</span><span class="token function">myEvery</span><span class="token punctuation">(</span> <span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
arr<span class="token punctuation">.</span><span class="token function">myEvery</span><span class="token punctuation">(</span> <span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><hr> <h3 id="_5-some-æ˜¯å¦æœ‰è‡³å°‘ä¸€ä¸ªç¬¦åˆè¦æ±‚"><a href="#_5-some-æ˜¯å¦æœ‰è‡³å°‘ä¸€ä¸ªç¬¦åˆè¦æ±‚" class="header-anchor">#</a> 5.someï¼ˆæ˜¯å¦æœ‰è‡³å°‘ä¸€ä¸ªç¬¦åˆè¦æ±‚ï¼‰</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">mySome</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">func</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> _arr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span>
      len <span class="token operator">=</span> _arr<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
      params <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> window<span class="token punctuation">;</span>
  
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>params<span class="token punctuation">,</span> <span class="token punctuation">[</span>_arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> _arr<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

arr<span class="token punctuation">.</span><span class="token function">mySome</span><span class="token punctuation">(</span> <span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
arr<span class="token punctuation">.</span><span class="token function">mySome</span><span class="token punctuation">(</span> <span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// false</span>


</code></pre></div><hr> <h2 id="promise"><a href="#promise" class="header-anchor">#</a> Promise+</h2> <h3 id="aop"><a href="#aop" class="header-anchor">#</a> AOP</h3> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">/**
 * AOP ç¼–ç¨‹
 */</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello world '</span> <span class="token operator">+</span> name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">before</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> newFn <span class="token operator">=</span> fn<span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'åœ¨å‡½æ•°æ‰§è¡Œå‰ æ‰§è¡Œ'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">newFn</span><span class="token punctuation">(</span><span class="token string">'æœ±æ˜†é¹'</span><span class="token punctuation">)</span> 

<span class="token comment">// åœ¨å‡½æ•°æ‰§è¡Œå‰ æ‰§è¡Œ</span>
<span class="token comment">// hello world</span>
</code></pre></div><hr> <h3 id="å‡½æ•°æŸ¯é‡ŒåŒ–"><a href="#å‡½æ•°æŸ¯é‡ŒåŒ–" class="header-anchor">#</a> å‡½æ•°æŸ¯é‡ŒåŒ–</h3> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">/**
 * å‡½æ•°æŸ¯é‡ŒåŒ–
 */</span>

<span class="token keyword">const</span> <span class="token function-variable function">curring</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> len <span class="token operator">=</span> fn<span class="token punctuation">.</span>length <span class="token comment">// å‡½æ•°çš„lengthå°±æ˜¯å‚æ•°çš„ä¸ªæ•°</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> newArgs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arr<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">]</span>
    <span class="token keyword">return</span> newArgs<span class="token punctuation">.</span>length <span class="token operator">==</span> len
      <span class="token operator">?</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>newArgs<span class="token punctuation">)</span>
      <span class="token operator">:</span> <span class="token function">curring</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> newArgs<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> newSum <span class="token operator">=</span> <span class="token function">curring</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> f</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c <span class="token operator">+</span> d <span class="token operator">+</span> f
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">newSum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 15</span>
</code></pre></div><hr> <h3 id="å»¶è¿Ÿæ‰§è¡ŒåŸç†"><a href="#å»¶è¿Ÿæ‰§è¡ŒåŸç†" class="header-anchor">#</a> å»¶è¿Ÿæ‰§è¡ŒåŸç†</h3> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">/**
 * æ‹“å±•ï¼šloash after å‡½æ•°åŸç†ï¼ˆå‡½æ•°åœ¨ç¬¬å‡ æ¬¡æ‰§è¡Œä¹‹åæ‰§è¡Œï¼Œè¿ç”¨äº†é—­åŒ…ï¼ŒPromise.all å·®ä¸å¤šä¹Ÿæ˜¯è¿™ä¸ªåŸç†ï¼‰
 */</span>
<span class="token keyword">function</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token parameter">times<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">--</span>times <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> newFn <span class="token operator">=</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello world  '</span> <span class="token operator">+</span> name<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">newFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">newFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">newFn</span><span class="token punctuation">(</span><span class="token string">'æœ±æ˜†é¹'</span><span class="token punctuation">)</span> <span class="token comment">// hello world æœ±æ˜†é¹</span>
</code></pre></div><hr> <div class="custom-block tip"><p class="custom-block-title">å‘å¸ƒè®¢é˜…æ¨¡å¼ å’Œ è®¢é˜…è§‚å¯Ÿè€…æ¨¡å¼ ä¹‹é—´çš„å…³ç³»</p> <p>å‘å¸ƒè®¢é˜…ï¼Œå‘å¸ƒ å’Œ è®¢é˜… ä¹‹é—´æ²¡æœ‰è”ç³»ï¼Œå°±å’Œä¸­ä»‹æ¨¡å¼ä¸€æ ·ï¼Œç”±ä¸­ä»‹æ¥è¿›è¡Œå¤„ç†</p> <p>è®¢é˜…å’Œè§‚å¯Ÿè€… ä¹‹é—´æœ‰å…³ç³»ï¼Œè§‚å¯Ÿè€…é‡Œé¢å­˜ç€ è®¢é˜…è€…çš„æ–¹æ³•ï¼Œåˆ°æ—¶å€™ è§‚å¯Ÿè€…å˜åŒ–äº†ï¼Œä¼šé€šçŸ¥è®¢é˜…è€…æ‰§è¡Œæ–¹æ³•</p></div> <img src="https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/notes/2.notes/3.JavaScript/ES6%E4%BB%A5%E5%8F%8AJS%E5%86%85%E7%BD%AE%E6%96%B9%E6%B3%95%E6%A2%B3%E7%90%86/clipboard_20200906100429.png" style="width:500px;"> <hr> <p>æˆ–è€…ä¸¾ä¸ªç”Ÿæ´»ä¸­çš„ä¾‹å­ï¼šç§Ÿæˆ¿</p> <ul><li>å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œå°±ç›¸å½“äºï¼Œç§Ÿæˆ·çš„ï¼Œå’Œæˆ¿ä¸œ ä¸è®¤è¯†ï¼Œç§Ÿæˆ·ç§Ÿæˆ¿è¦æ‰¾ä¸­ä»‹ï¼Œæˆ¿ä¸œå…ˆæŠŠæˆ¿å­ç§Ÿå‡ºå»ï¼Œä¹Ÿè¦æ‰¾æˆ¿ä¸œï¼Œç§Ÿæˆ·é€šçŸ¥ä¸­ä»‹è¦ç§Ÿæˆ¿äº†ï¼Œä¸­ä»‹æ‰¾åˆ°åˆé€‚çš„äº†ï¼Œå°±é€šçŸ¥æˆ¿ä¸œç­¾åˆåŒ</li> <li>è§‚å¯Ÿè®¢é˜…æ¨¡å¼ï¼Œç›¸å½“äºï¼Œç§Ÿæˆ·å’Œæˆ¿ä¸œ è®¤è¯†ï¼Œç§Ÿæˆ·æƒ³ç§Ÿæˆ¿ç›´æ¥æ‰¾æˆ¿ä¸œç§Ÿå°±è¡Œäº†ï¼Œç§Ÿæˆ·è¿™é‡Œå­˜æ”¾è¿™ æˆ¿ä¸œç§Ÿæˆ¿çš„æ–¹æ³•ï¼Œå°‘äº†ä¸€ä¸ªä¸­ä»‹çš„</li></ul> <hr> <h3 id="å‘å¸ƒè®¢é˜…"><a href="#å‘å¸ƒè®¢é˜…" class="header-anchor">#</a> å‘å¸ƒè®¢é˜…</h3> <blockquote><p>å…¶å®å¯¹è¿™é‡Œæˆ‘è¿˜æ˜¯ä¸å¤ªç†è§£ï¼Œæ„Ÿè§‰è¿˜æœ‰æ›´å¥½çš„ç¤ºä¾‹</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> eventObj <span class="token operator">=</span> <span class="token punctuation">{</span>
  _arr<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// ä¸­ä»‹å­˜æ”¾ï¼Œè®¢é˜…äº‹ä»¶</span>
  
  <span class="token function">on</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">emit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fn</span> <span class="token operator">=&gt;</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ç§Ÿæˆ¿1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ç§Ÿæˆ¿1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

eventObj<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>fn1<span class="token punctuation">)</span> <span class="token comment">// è®¢é˜…</span>
eventObj<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>fn2<span class="token punctuation">)</span> <span class="token comment">// è®¢é˜…</span>

eventObj<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// æ‰§è¡Œæ‰€æœ‰çš„è®¢é˜…äº‹ä»¶</span>
</code></pre></div><hr> <h3 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="header-anchor">#</a> è§‚å¯Ÿè€…æ¨¡å¼</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * è§‚å¯Ÿè€…æ¨¡å¼
 */</span>

<span class="token keyword">class</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>Observers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token string">'ç©'</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// è¢«è§‚å¯Ÿè€…ä¸­è¦å­˜æ”¾æ‰€æœ‰çš„è§‚å¯Ÿè€…</span>
  <span class="token function">attach</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>Observers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">newState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> newState
    <span class="token keyword">this</span><span class="token punctuation">.</span>Observers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">o</span> <span class="token operator">=&gt;</span> o<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token punctuation">}</span>

  <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">body</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>body<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">è·Ÿ</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">è¯´</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>body<span class="token punctuation">.</span>state<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// å°å®å®</span>

<span class="token keyword">let</span> body <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subject</span><span class="token punctuation">(</span><span class="token string">'å°å®å®'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> o1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Observer</span><span class="token punctuation">(</span><span class="token string">'çˆ¸çˆ¸'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> o2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Observer</span><span class="token punctuation">(</span><span class="token string">'å¦ˆå¦ˆ'</span><span class="token punctuation">)</span>

body<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>o1<span class="token punctuation">)</span>
body<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>o2<span class="token punctuation">)</span>

body<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token string">'æœ‰äººæ‰“æˆ‘'</span><span class="token punctuation">)</span>

<span class="token comment">// å°å®å®è·Ÿçˆ¸çˆ¸è¯´æœ‰äººæ‰“æˆ‘</span>
<span class="token comment">// å°å®å®è·Ÿå¦ˆå¦ˆè¯´æœ‰äººæ‰“æˆ‘</span>
</code></pre></div><hr> <h3 id="ç®€å•ç‰ˆæœ¬"><a href="#ç®€å•ç‰ˆæœ¬" class="header-anchor">#</a> ç®€å•ç‰ˆæœ¬</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">MyPromise</span><span class="token punctuation">{</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">executor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token string">'pending'</span> <span class="token comment">// pending Fulfilled Rejected</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span> <span class="token comment">// æ­£ç¡®è¿”å›ä¿¡æ¯</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>reason <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span> <span class="token comment">// é”™è¯¯è¿”å›ä¿¡æ¯</span>
    
    <span class="token keyword">this</span><span class="token punctuation">.</span>resovleArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// resovle</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>rejectArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// reject </span>


    <span class="token comment">// æˆåŠŸ</span>
    <span class="token keyword">const</span> <span class="token function-variable function">resolve</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'pending'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token string">'Fulfilled'</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> val<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>resovleArr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fn</span> <span class="token operator">=&gt;</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// å¤±è´¥</span>
    <span class="token keyword">const</span> <span class="token function-variable function">reject</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'pending'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token string">'Rejected'</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>reason <span class="token operator">=</span> reason<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>resovleArr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fn</span> <span class="token operator">=&gt;</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>reason<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token function">executor</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">onFulfilled<span class="token punctuation">,</span> onRejected</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token string">'Fulfilled'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">onFulfilled</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token string">'Rejected'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">onRejected</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>reason<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token string">'pending'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      
      <span class="token keyword">this</span><span class="token punctuation">.</span>resovleArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">onFulfilled</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token keyword">this</span><span class="token punctuation">.</span>rejectArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">onRejected</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>reason<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resovle<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resovle</span><span class="token punctuation">(</span><span class="token string">'æˆåŠŸ'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'res'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// é—®é¢˜1ï¼š.then æ˜¯æ€ä¹ˆé“¾å¼è°ƒç”¨çš„</span>
</code></pre></div><hr> <h3 id="ä¼ ç»Ÿå®ç°"><a href="#ä¼ ç»Ÿå®ç°" class="header-anchor">#</a> ä¼ ç»Ÿå®ç°</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å®ç°çš„åŸç†</span>

<span class="token comment">// promiseæ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œèƒ½æ ¹æ®ä¸åŒçš„çŠ¶æ€ è§¦å‘ä¸åŒçš„å›è°ƒ</span>
<span class="token comment">// Pending ç­‰å¾… | Fulfilled æˆåŠŸ | Rejected å¤±è´¥</span>

<span class="token comment">// å‚æ•°ä¼ ä¸€ä¸ªå‡½æ•°ï¼Œ</span>
<span class="token keyword">function</span> <span class="token function">MyPromise</span> <span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// promiseæ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œèƒ½æ ¹æ®ä¸åŒçš„çŠ¶æ€ è§¦å‘ä¸åŒçš„å›è°ƒ</span>
    <span class="token comment">// pending ç­‰å¾… | Fulfilled æˆåŠŸ | Rejected å¤±è´¥</span>

    <span class="token keyword">let</span> that <span class="token operator">=</span> <span class="token keyword">this</span>
    that<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token string">'pending'</span><span class="token punctuation">;</span>
    that<span class="token punctuation">.</span>resolveValue <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    that<span class="token punctuation">.</span>rejectValue <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    
    <span class="token comment">// å¦‚ä½•è§£å†³å¼‚æ­¥å‘¢ï¼Ÿæˆ‘ä»¬æ‰§è¡Œçš„æ—¶å€™å…ˆä¸æ‰§è¡Œï¼Œç­‰åˆ°res() è§¦å‘çš„æ—¶å€™æ‰è§¦å‘ï¼Œæˆ‘ä»¬å…ˆè®°å½•ä¸‹</span>
    that<span class="token punctuation">.</span>ResoveCallBackLisst <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    that<span class="token punctuation">.</span>RejctCallBackList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token comment">// æˆåŠŸ</span>
    <span class="token keyword">function</span> <span class="token function">resolve</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>that<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'pending'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            that<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token string">'Fulfilled'</span>
            that<span class="token punctuation">.</span>resolveValue <span class="token operator">=</span> val
            that<span class="token punctuation">.</span>ResoveCallBackLisst<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">ele</span> <span class="token operator">=&gt;</span> <span class="token function">ele</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>   
    <span class="token punctuation">}</span>

    <span class="token comment">// å¤±è´¥</span>
    <span class="token keyword">function</span> <span class="token function">reject</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>that<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'pending'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            that<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token string">'Rejected'</span>
            that<span class="token punctuation">.</span>rejectValue <span class="token operator">=</span> val
            that<span class="token punctuation">.</span>RejctCallBackList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">ele</span> <span class="token operator">=&gt;</span> <span class="token function">ele</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token function">fn</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>

<span class="token class-name">MyPromise</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">then</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">onFulfilled<span class="token punctuation">,</span> onRejected</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token keyword">this</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>that<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'pending'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
        that<span class="token punctuation">.</span>ResoveCallBackLisst<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">onFulfilled</span><span class="token punctuation">(</span>that<span class="token punctuation">.</span>resolveValue<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

        that<span class="token punctuation">.</span>RejctCallBackList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">onRejected</span><span class="token punctuation">(</span>that<span class="token punctuation">.</span>rejectValue<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>that<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'Fulfilled'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">onFulfilled</span><span class="token punctuation">(</span>that<span class="token punctuation">.</span>resolveValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>that<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'Rejected'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">onRejected</span><span class="token punctuation">(</span>that<span class="token punctuation">.</span>rejectValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>


<span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span> <span class="token punctuation">(</span> <span class="token parameter">res<span class="token punctuation">,</span> rej</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// setTimeout( () =&gt; {</span>
    <span class="token comment">//     res('ä½ å¥½ä¸–ç•Œ')</span>
    <span class="token comment">// }, 3000)</span>
    <span class="token function">res</span><span class="token punctuation">(</span><span class="token string">'ä½ å¥½ä¸–ç•Œ'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/1.note/3.JavaScript/3.JavaScriptåº”ç”¨.html" class="prev">
        3.JavaScriptåº”ç”¨
      </a></span> <span class="next"><a href="/1.note/3.JavaScript/5.Underscoreåº“æºç åˆ†æ.html">
        5.Underscoreåº“æºç åˆ†æ
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.32698c1e.js" defer></script><script src="/assets/js/2.ddd86d71.js" defer></script><script src="/assets/js/25.05b0550d.js" defer></script><script src="/assets/js/3.c0b47333.js" defer></script>
  </body>
</html>
